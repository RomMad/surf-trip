{% extends 'base.html.twig' %}

{% set title = 'trips.label'|trans %}

{% block title %}
    {{ title }}
{% endblock %}

{% block body %}
    <h1 class="heading-1">
      {{- title -}}
    </h1>

    <twig:Table>
        <twig:Table:Header>
            <twig:Table:Row>
                <twig:Table:Head>
                    {{ 'id.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'title.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'location.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'start_at.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'end_at.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'required_levels.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'description.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'created_at.label'|trans }}
                </twig:Table:Head>
                <twig:Table:Head>
                    {{ 'actions.label'|trans }}
                </twig:Table:Head>
            </twig:Table:Row>
        </twig:Table:Header>
        <twig:Table:Body>
            {% for trip in trips %}
                <twig:Table:Row>
                    <twig:Table:Cell>
                        {{ trip.id }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.title }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.location }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.startAt|date('Y-m-d') }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.endAt|date('Y-m-d') }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.requiredLevels|map(rl => rl.label|trans)|join(', ') }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.description }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        {{ trip.createdAt|date('Y-m-d H:i:s') }}
                    </twig:Table:Cell>
                    <twig:Table:Cell>
                        <div class="flex flex-col gap-2">
                            <twig:Button as="a" size="sm" href="{{ path('app.trip.show', {id: trip.id}) }}">
                                <twig:ux:icon name="lucide:eye" />
                                {{- 'show.label'|trans -}}
                            </twig:Button>
                            <twig:Button as="a" size="sm" href="{{ path('app.trip.edit', {id: trip.id}) }}">
                                <twig:ux:icon name="lucide:edit-2" />
                                {{- 'edit.label'|trans -}}
                            </twig:Button>
                        </div>
                    </twig:Table:Cell>
                </twig:Table:Row>
            {% else %}
                <twig:Table:Row>
                    <twig:Table:Cell colspan="9">
                        {{- 'no_records_found.label'|trans -}}
                    </twig:Table:Cell>
                </twig:Table:Row>
            {% endfor %}
        </twig:Table:Body>
    </twig:Table>

    <twig:Button as="a" href="{{ path('app.trip.new') }}">
        <twig:ux:icon name="lucide:plus" />
        {{- 'create_new.label'|trans -}}
    </twig:Button>
{% endblock %}
